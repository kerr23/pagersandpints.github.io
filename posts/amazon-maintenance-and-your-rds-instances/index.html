<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Amazon Maintenance and your RDS Instances :: Pagers and Pints — DevOps, SRE and Beer</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="I recently had the pleasure of Amazon telling me that they had to reboot all of my Postgres RDS instances to apply some security patches.
When using RDS you generally expect that Amazon is going to do something like this and I was at least happy that they told me about it and gave me the option to trigger it on a specific maintenance window or else on my own time (up to a drop dead date where they&amp;rsquo;d just do it for me)"/>
<meta name="keywords" content="DevOps, SRE, Site Reliability, Pager"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="../../posts/amazon-maintenance-and-your-rds-instances/" />


<link rel="stylesheet" href="../../assets/style.css">

  <link rel="stylesheet" href="../../assets/green.css">



<link rel="stylesheet" href="../../style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="../../img/favicon/green.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Amazon Maintenance and your RDS Instances :: Pagers and Pints — DevOps, SRE and Beer" />
<meta name="twitter:description" content="I recently had the pleasure of Amazon telling me that they had to reboot all of my Postgres RDS instances to apply some security patches.
When using RDS you generally expect that Amazon is going to do something like this and I was at least happy that they told me about it and gave me the option to trigger it on a specific maintenance window or else on my own time (up to a drop dead date where they&amp;rsquo;d just do it for me)" />
<meta name="twitter:site" content="/" />
<meta name="twitter:creator" content="Dave Kerr" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Amazon Maintenance and your RDS Instances :: Pagers and Pints — DevOps, SRE and Beer">
<meta property="og:description" content="I recently had the pleasure of Amazon telling me that they had to reboot all of my Postgres RDS instances to apply some security patches.
When using RDS you generally expect that Amazon is going to do something like this and I was at least happy that they told me about it and gave me the option to trigger it on a specific maintenance window or else on my own time (up to a drop dead date where they&amp;rsquo;d just do it for me)" />
<meta property="og:url" content="/posts/amazon-maintenance-and-your-rds-instances/" />
<meta property="og:site_name" content="Amazon Maintenance and your RDS Instances" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2016-02-05 00:12:00 &#43;0000 UTC" />











</head>
<body class="">


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="../../">
  <div class="logo">
    Pagers and Pints
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="../../posts/amazon-maintenance-and-your-rds-instances/">Amazon Maintenance and your RDS Instances</a></h1>
  <div class="post-meta">
    <span class="post-date">
      2016-02-05
    </span>
    
    <span class="post-author">::
      Dave Kerr
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="../../tags/aws/">aws</a>&nbsp;
    
    #<a href="../../tags/postgresql/">postgresql</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    <p>I recently had the pleasure of Amazon telling me that they had to reboot all of my Postgres RDS instances to apply some security patches.</p>

<p>When using RDS you generally expect that Amazon is going to do something like this and I was at least happy that they told me about it and gave me the option to trigger it on a specific maintenance window or else on my own time (up to a drop dead date where they&rsquo;d just do it for me)</p>

<p>One thing that you can&rsquo;t really know is what the impact of the operation is going to be. You know it&rsquo;s a downtime, but for how long?</p>

<p>My production instances, are of course, Multi-AZ but all of my non-production instances are not.</p>

<p>Fortunately, my non-production instances and my production instances both needed to get rebooted, so I could do some  up-front testing on the timing.</p>

<p>What I found was that the process takes about 10 to 15 minutes and, in this particular case, it was not impacted by database size.<br />
Although it is impacted by the number of instances you&rsquo;re rebooting at the same time. It seems Amazon queues the instances up so that some instances take longer than others.</p>

<p>The pre-reboot security patches took about 5 minutes to load during this time the database was up.<br />
This was followed by a shutdown / reboot during which the database was unavailable.<br />
After the reboot which took less than a minute the database was immediately available while the system did post processing.<br />
After that a backup is performed which doesn&rsquo;t impact the system.</p>

<p>So total downtime was about a minute, but I scheduled 10 minutes just to be safe.</p>

<p>For the Multi-AZ instances the same process is followed but the shutdown / reboot is accompanied by an AZ failover which takes place nearly instantly. This is pretty cool as long as your applications are robust enough to re-connect. (Mine were not, so they required a restart) I timed the reboot to go with a deploy so no additional downtime was required.</p>

<p>In the end it was fairly painless, if you don&rsquo;t trust your applications ability to reconnect it&rsquo;s good to baby sit them. Otherwise kicking it off during a maintenance window and not worrying about it is certainly doable.</p>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      
      <span class="button next">
        <a href="../../posts/introducing-mrtuner-and-rdstune/">
          <span class="button__text">Introducing MrTuner and RDSTune</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 Powered by <a href="http://gohugo.io">Hugo</a></span>
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="../../assets/main.js"></script>
<script src="../../assets/prism.js"></script>





  
</div>

</body>
</html>

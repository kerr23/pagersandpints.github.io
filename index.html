<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Turning off Pagers and Filling up Pints</title>
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  
  <meta name="theme-color" content="#000000" />
  
  <meta http-equiv="window-target" content="_top" />
  
  
  
  <meta name="generator" content="Hugo 0.61.0 with theme pure" />
  <title>Turning off Pagers and Filling up Pints</title>
  

  <link rel="alternate" type="application/rss+xml" href="https://pagersandpints.com/index.xml" title="Turning off Pagers and Filling up Pints" />
  <link rel="stylesheet" href="https://pagersandpints.com/css/style.css">
  <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
  <meta property="og:title" content="Turning off Pagers and Filling up Pints" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://pagersandpints.com/" />
<meta property="og:updated_time" content="2019-05-27T16:49:41-07:00" />
<meta itemprop="name" content="Turning off Pagers and Filling up Pints">
<meta itemprop="description" content=""><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Turning off Pagers and Filling up Pints"/>
<meta name="twitter:description" content=""/>

  <!--[if lte IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
    <![endif]-->

  <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->

</head>
  </head>
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header"><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="Type something..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>
  <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title"> Tags</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
            
            <li class="tag-list-item"><a href="https://pagersandpints.com/tags/aws/" class="tag-list-link">aws</a><span
                    class="tag-list-count">3</span></li>
            
            
            <li class="tag-list-item"><a href="https://pagersandpints.com/tags/consul/" class="tag-list-link">consul</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://pagersandpints.com/tags/docker/" class="tag-list-link">docker</a><span
                    class="tag-list-count">2</span></li>
            
            
            <li class="tag-list-item"><a href="https://pagersandpints.com/tags/linux/" class="tag-list-link">linux</a><span
                    class="tag-list-count">2</span></li>
            
            
            <li class="tag-list-item"><a href="https://pagersandpints.com/tags/postgresql/" class="tag-list-link">postgresql</a><span
                    class="tag-list-count">15</span></li>
            
        </ul>

    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://pagersandpints.com/2019/05/containers-consul-configuration/" class="title">Containers, Configuration, and Consul</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2019-05-27 16:49:41 -0700 -0700" itemprop="datePublished">2019-05-27</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://pagersandpints.com/2016/02/amazon-maintenance-and-your-rds-instances/" class="title">Amazon Maintenance and your RDS Instances</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2016-02-05 00:12:00 &#43;0000 UTC" itemprop="datePublished">2016-02-05</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://pagersandpints.com/2015/01/introducing-mrtuner-and-rdstune/" class="title">Introducing MrTuner and RDSTune</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2015-01-15 22:42:00 &#43;0000 UTC" itemprop="datePublished">2015-01-15</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://pagersandpints.com/2014/08/dockerfile-golf-or-optimizing-the-docker-build-process/" class="title">Dockerfile Golf (or optimizing the Docker build process)</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2014-08-29 21:19:00 &#43;0000 UTC" itemprop="datePublished">2014-08-29</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://pagersandpints.com/2013/11/tune-your-postgres-rds-instance-via-parameter-groups/" class="title">Tune your Postgres RDS instance via parameter groups</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2013-11-20 00:39:00 &#43;0000 UTC" itemprop="datePublished">2013-11-20</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    

<main class="main" role="main">
   
  <div class="content article-list">
    
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2019/05/containers-consul-configuration/"
    >Containers, Configuration, and Consul</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">Through the history of technology, configuration management has driven many design patterns. Empires have been built upon things such as Chef, Ansible, or Puppet all with the intent to remove barriers in managing configuration files for applications deployed in various places. One of the challenges with the traditional approach is the people who understand the configuration(the QA team, developers etc.) are usually different from the people who are managing the configs in Chef.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2019/05/containers-consul-configuration/" class="">
  <time datetime="2019-05-27 16:49:41 -0700 -0700" itemprop="datePublished">2019-05-27</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/docker/"> docker </a>
    <a class="article-tag-link" href="/tags/consul/"> consul </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2019/05/containers-consul-configuration/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:748words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:4minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2016/02/amazon-maintenance-and-your-rds-instances/"
    >Amazon Maintenance and your RDS Instances</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">I recently had the pleasure of Amazon telling me that they had to reboot all of my Postgres RDS instances to apply some security patches.
When using RDS you generally expect that Amazon is going to do something like this and I was at least happy that they told me about it and gave me the option to trigger it on a specific maintenance window or else on my own time (up to a drop dead date where they'd just do it for me)</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2016/02/amazon-maintenance-and-your-rds-instances/" class="">
  <time datetime="2016-02-05 00:12:00 &#43;0000 UTC" itemprop="datePublished">2016-02-05</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/aws/"> aws </a>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2016/02/amazon-maintenance-and-your-rds-instances/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:382words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:2minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2015/01/introducing-mrtuner-and-rdstune/"
    >Introducing MrTuner and RDSTune</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">Two simple gems to help tune your Postgres databases.
I'm a big fan of PgTune. I think that in many cases you can run PgTune and set-it-and-forget-it for your Postgres parameters. I like it so much that I often wish I had access to it in my code - especially when working with Puppet to provision new databases servers.
When I started looking into RDS Postgres a while back I realized that the default configuration for those instances was lacking and I really wished I could run PgTune on the RDS instances.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2015/01/introducing-mrtuner-and-rdstune/" class="">
  <time datetime="2015-01-15 22:42:00 &#43;0000 UTC" itemprop="datePublished">2015-01-15</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/aws/"> aws </a>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2015/01/introducing-mrtuner-and-rdstune/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:186words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2014/08/dockerfile-golf-or-optimizing-the-docker-build-process/"
    >Dockerfile Golf (or optimizing the Docker build process)</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">I was working with a friend of mine on his startup Down For Whatever and he wanted to use Docker.
I created a docker farm for him and we're using Centurion for deployments, we signed up for a docker hub account to store images and started pushing code.
A few days later he emailed me saying that he wanted to switch to capistrano for code deployments instead of building a docker image each time because pushing the image to docker hub took too damn long.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2014/08/dockerfile-golf-or-optimizing-the-docker-build-process/" class="">
  <time datetime="2014-08-29 21:19:00 &#43;0000 UTC" itemprop="datePublished">2014-08-29</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/docker/"> docker </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2014/08/dockerfile-golf-or-optimizing-the-docker-build-process/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:1297words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:7minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2013/11/tune-your-postgres-rds-instance-via-parameter-groups/"
    >Tune your Postgres RDS instance via parameter groups</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">It seems like the folks at Amazon set some strange defaults for their RDS Postgres instances and they make it pretty darn difficult to allow for dynamically sized instance.
You tune your Postgres RDS instance via Parameter Groups. In the parameter group configuration is all of the normal PG tuning parameters from your postgresql.conf.
They provide you with a variable: {DBInstanceClassMemory} which returns the memory in bytes available to the instance, and you can use that in some limited ways to dynamically set parameters based on the instance type you chose for your RDS database.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2013/11/tune-your-postgres-rds-instance-via-parameter-groups/" class="">
  <time datetime="2013-11-20 00:39:00 &#43;0000 UTC" itemprop="datePublished">2013-11-20</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/aws/"> aws </a>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2013/11/tune-your-postgres-rds-instance-via-parameter-groups/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:862words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:5minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/10/mention-in-the-postgres-release-notes/"
    >Mention in the Postgres release notes</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">I recently submitted a (very) small patch for PostgreSQL to fix a problem we were having with the backup label not getting fsynced to disk. (which is a problem if you're using something like AWS or SAN snapshots.)
 I kindly got a mention in the release notes for it, pretty cool! (thanks guys!)</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/10/mention-in-the-postgres-release-notes/" class="">
  <time datetime="2012-10-15 22:31:00 &#43;0000 UTC" itemprop="datePublished">2012-10-15</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/10/mention-in-the-postgres-release-notes/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:53words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/08/streaming-replication-syncing-mirrors-and-panic-wal-contains-references-to-invalid-pages/"
    >Streaming Replication, syncing mirrors and PANIC: WAL contains references to invalid pages</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">Update 10/15/2012
With the release of Postgres 9.1.6 I believe that what we were running into was the critical bug that's fixed in that release regarding WAL replay.
So Mystery Solved!
I've recently come across a problem with Streaming Replication where on failover the system generates a PANIC: WAL contains references to invalid pages error message.
Aug 9 14:06:22 db01 postgres[11005]: [8-1] user=,db=,host= LOG: trigger file found: /db/9.1/data/failover Aug 9 14:06:22 db01 postgres[11012]: [3-1] user=,db=,host= FATAL: terminating walreceiver process due to administrator command Aug 9 14:06:23 db01 postgres[11005]: [9-1] user=,db=,host= LOG: invalid record length at 398/1D0002F0 Aug 9 14:06:23 db01 postgres[11005]: [10-1] user=,db=,host= LOG: redo done at 398/1D000298 Aug 9 14:06:23 db01 postgres[11005]: [11-1] user=,db=,host= LOG: last completed transaction was at log time 2012-08-09 09:16:08.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/08/streaming-replication-syncing-mirrors-and-panic-wal-contains-references-to-invalid-pages/" class="">
  <time datetime="2012-08-14 04:53:00 &#43;0000 UTC" itemprop="datePublished">2012-08-14</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/08/streaming-replication-syncing-mirrors-and-panic-wal-contains-references-to-invalid-pages/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:516words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:3minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/07/i-o-spikes-during-checkpoint/"
    >I/O Spikes during Checkpoint</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">I run Postgres on a fairly large linux server with 256G of ram.
During high load, I found that the I/O of the $PGDATA volume was spiking to 100% making the database slow down to a crawl for seconds at a time, despite having a fairly fast I/O subsystem.
This is what the spike looked like from an iostat output:
Date r/s w/s rsec/s wsec/s await svctm %util
[&hellip;]
07/10/12 00:35:36 0 69.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/07/i-o-spikes-during-checkpoint/" class="">
  <time datetime="2012-07-10 21:16:00 &#43;0000 UTC" itemprop="datePublished">2012-07-10</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/07/i-o-spikes-during-checkpoint/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:465words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:3minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/06/pg_service-conf-in-redhat/"
    >pg_service.conf in redhat</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">I'm toying around with pg_service.conf. It wasn't obvious - but I was able to determine that if you add pg_service.conf to /etc/sysconfig/pgsql/ it will get picked up globally.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/06/pg_service-conf-in-redhat/" class="">
  <time datetime="2012-06-25 16:03:00 &#43;0000 UTC" itemprop="datePublished">2012-06-25</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/linux/"> linux </a>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/06/pg_service-conf-in-redhat/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:28words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/06/psql-reverse-search-history/"
    >psql - reverse search history</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">psql the postgresql command line client is usually compiled with libreadline support. As a result of this you can use some neat functionality such as reverse search by hitting ctl-r within the client.
report=# hit CTL-r
(reverse-i-search)`': start typing
(reverse-i-search)`sel': select * from report.audit where</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/06/psql-reverse-search-history/" class="">
  <time datetime="2012-06-14 21:15:00 &#43;0000 UTC" itemprop="datePublished">2012-06-14</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/06/psql-reverse-search-history/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:45words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/06/create-a-backup-manifest-in-postgresql-with-oid2name/"
    >Create a backup manifest in PostgreSQL with oid2name</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">oid2name is a nifty little program comes with postgresql an it allows you to take those obscure relfilenode named datafiles at the OS level and map them to database objects.
The only downside to this little tool is that it doesn't exactly work when your database is down since it uses pg_* to figure out this info. So if you're in a situation where you're restoring the database and find out that you're missing a file from the backup - you may want to know what table is lost.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/06/create-a-backup-manifest-in-postgresql-with-oid2name/" class="article-title">
  <time datetime="2012-06-07 05:02:00 &#43;0000 UTC" itemprop="datePublished">2012-06-07</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> PostgreSQL </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/06/create-a-backup-manifest-in-postgresql-with-oid2name/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:203words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/05/a-script-to-see-row-counts-and-table-size-in-postgresql/"
    >A script to see row counts and table size in PostgreSQL</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">Here is a little perl script that I use to give me a list of tables in a schema, a rowcount and the pg_relation_size of a table. The usage is just:
pg_rowcount ex:./pg\_rowcount.pl david.kerr pg\_catalog
The output looks like this:
Table Rows Size -------------------------------------------------------------- pg_statistic 1853 1672 kB pg_type 910 168 kB pg_attribute 9569 1488 kB pg_class 1371 416 kB pg_authid 52 16 kB pg_index 766 112 kB pg_operator 705 104 kB pg_database 44 16 kB You can download the script here</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/05/a-script-to-see-row-counts-and-table-size-in-postgresql/" class="">
  <time datetime="2012-05-13 12:13:00 &#43;0000 UTC" itemprop="datePublished">2012-05-13</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/05/a-script-to-see-row-counts-and-table-size-in-postgresql/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:82words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/05/how-to-fix-stalled-cups-printing/"
    >How To Fix Stalled CUPS Printing</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">Every once in a while CUPS printing just stalls, no reason that I can tell. (I blame the network, naturally) but what ends up happening is that the print jobs get backed up and you need to clear out the queue. The fastest way to do this is to do:
rm /var/spool/cups/* /etc/init.d/cups restart </div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/05/how-to-fix-stalled-cups-printing/" class="">
  <time datetime="2012-05-13 12:12:00 &#43;0000 UTC" itemprop="datePublished">2012-05-13</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/linux/"> linux </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/05/how-to-fix-stalled-cups-printing/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:54words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/05/how-to-reset-sequences-in-postgresql/"
    >How To Reset Sequences in PostgreSQL</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">I use a lot of &ldquo;serial&rdquo; data type fields, sometimes the nextval of my sequence doesn't reflect the max() of my table. Since I do a lot of moving data around these can get messed up. The basic command that you want to use to reset a sequence is:
select setval(&#39;sequence_name&#39;, value); However, the cool thing about Postgres is that can be a query too so I use:
select setval(&#39;sequence_name&#39;, select max(column_name) from tablename); So I wrote a little perl script to look through all of the columns that have a default like &ldquo;nextval&rdquo; (which if you look in the database is how a serial column actually looks) and sets the sequence to the max of the value in that table.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/05/how-to-reset-sequences-in-postgresql/" class="">
  <time datetime="2012-05-13 12:11:00 &#43;0000 UTC" itemprop="datePublished">2012-05-13</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/05/how-to-reset-sequences-in-postgresql/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:181words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/05/using-generate_series-in-postgresql/"
    >Using generate_series() in PostgreSQL</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">If you want to dummy up a bunch of data in PostgreSQL you can use this neat little trick
create table test (a int); insert into test (select generate_series(0,999,1)); INSERT 0 1000; </div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/05/using-generate_series-in-postgresql/" class="">
  <time datetime="2012-05-13 12:07:00 &#43;0000 UTC" itemprop="datePublished">2012-05-13</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/05/using-generate_series-in-postgresql/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:32words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/05/using-insert-returning-with-perl-and-postgresql/"
    >Using insert .. returning with perl and PostgreSQL</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">PostgreSQL provides the ability to return a value on insert. so for example:
create table foo (id serial, name text); insert into foo(&#39;dave&#39;) returning id; Will return the auto-generated value for &ldquo;id&rdquo; assigned to &lsquo;dave&rsquo;
You can leverage this from within Perl by doing something like this:
my $foo_insert = &#34;insert into foo(?) returning id&#34; my $foo_cur = $dbh-&gt;prepare($foo_insert); $foo_cur-&gt;execute(&#39;Dave&#39;); my $foo_rec = $foo_cur-&gt;fetchrow_hashref(); print $foo_rec{&#34;id&#34;}; </div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/05/using-insert-returning-with-perl-and-postgresql/" class="">
  <time datetime="2012-05-13 12:05:00 &#43;0000 UTC" itemprop="datePublished">2012-05-13</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/05/using-insert-returning-with-perl-and-postgresql/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:66words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/05/parsing-large-files-with-pgfouine/"
    >Parsing Large files with Pgfouine</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">ppgfouine is a nice logfile analyzer for PostgreSQL written in php.
When doing a trace on a very long running ETL process the logfile generated was ~11GB.
This left me running up against a 2GB barrier in php for fopen().
If you've got a 64bit machine and can recompile php with -D_FILE_OFFSET_BITS=64 then you're good to go. But in my case, I wasn't able to do either.
 The error i'd get is: PHP Fatal error: File is not readable.</div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/05/parsing-large-files-with-pgfouine/" class="">
  <time datetime="2012-05-13 11:56:00 &#43;0000 UTC" itemprop="datePublished">2012-05-13</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/05/parsing-large-files-with-pgfouine/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:158words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article>
    <article
      class="article article-type-page"
      itemscope
      itemtype="http://schema.org/BlogPosting"
    >
      <div class="article-header">
        <h1 itemprop="name">
  <a
    class="article-title"
    href="/2012/05/how-to-add-quotes-to-results-in-dynamic-sql/"
    >How To Add Quotes to results in dynamic SQL</a
  >
</h1>

      </div>
      <div class="article-entry text-muted" itemprop="description">I frequently find the need to have single quoted output when i generate dynamic SQL.
It's always a pain to remember the exact number of ticks needed to get the quoted output.
Here is a reminder on how to do it:
select &#39;&#39;&#39;&#39;||schemaname||&#39;.&#39;||tablename||&#39;&#39;&#39;&#39; from pg_tables i.e., four quotes when there's no text, or three quotes on the outside and one on the inside when there is text.
select &#39;&#39;&#39;public.&#39;||tablename||&#39;&#39;&#39;;&#39; from pg_tablesselect &#39;select pg_size_pretty(pg_relation_size(&#39;&#39;&#39;||tablename||&#39;&#39;&#39;));&#39; from pg_tables where schemaname = &#39;bla&#39;; </div>
      <p class="article-meta"><span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://pagersandpints.com/2012/05/how-to-add-quotes-to-results-in-dynamic-sql/" class="">
  <time datetime="2012-05-13 11:38:00 &#43;0000 UTC" itemprop="datePublished">2012-05-13</time>
</a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/postgresql/"> postgresql </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2012/05/how-to-add-quotes-to-results-in-dynamic-sql/#comments" class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count:79words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count:1minutes </span>
      </p>
    </article></div>
  
</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
  <div class="copyright">
    &copy;2017  -
    2019
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/rust.min.js"></script>
<script type="text/javascript"
    src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script type="text/javascript" src="https://pagersandpints.com/js/application.js"></script>
<script type="text/javascript" src="https://pagersandpints.com/js/plugin.js"></script>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            ROOT_URL: 'https:\/\/pagersandpints.com',
            CONTENT_URL: 'https:\/\/pagersandpints.com\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="https://pagersandpints.com/js/insight.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-154422416-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
